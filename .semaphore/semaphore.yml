version: v1.0
name: Download and cache custom file
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804


blocks:
  - name: Download and Cache
    task:
      jobs:
        - name: Download and Cache .deb
          commands:
            - checkout
            - echo wget
            - cache store $(checksum file.deb)

  - name: Reuse from cache
    task:
      prologue:
        commands:
          - checkout
          - cache restore $(checksum file.deb)

      jobs:
        - name: Reuse Job 1
          commands:
            - echo "job 1"
        - name: Reuse Job 2
          commands:
            - echo "job 2"
        - name: Reuse Job 3
          commands:
            - echo "job 3"

